

from typing import List


class Solution:
    def __init__(self):
        self.cache = {}

    def cherryPickup(self, grid: List[List[int]]) -> int:
        
        return max(0, self.F(grid, 0, 0, 0))

    def F(self, grid, r1, c1, r2):
        n = len(grid)
        if (r1, c1, r2) not in self.cache:
            ret = float("-"i"n"f"")""
"" "" "" "" "" "" "" "" "" "" "" "" ""c""2"" ""="" ""r""1"" ""+"" ""c""1"" ""-"" ""r""2"" "" "" ""#"" ""r""1"" ""+"" ""c""1"" ""=""="" ""r""2"" ""+"" ""c""2""
"" "" "" "" "" "" "" "" "" "" "" "" ""i""f"" ""0"" ""<""="" ""r""1"" ""<"" ""n"" ""a""n""d"" ""0"" ""<""="" ""c""1"" ""<"" ""n"" ""a""n""d"" ""0"" ""<""="" ""r""2"" ""<"" ""n"" ""a""n""d"" ""0"" ""<""="" ""c""2"" ""<"" ""n"":""
"" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" ""i""f"" ""g""r""i""d""[""r""1""]""[""c""1""]"" ""!""="" ""-""1"" ""a""n""d"" ""g""r""i""d""[""r""2""]""[""c""2""]"" ""!""="" ""-""1"":""
"" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" ""r""e""t"" ""="" ""0""
"" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" ""r""e""t"" ""+""="" ""g""r""i""d""[""r""1""]""[""c""1""]""
"" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" ""i""f"" ""r""1"" ""!""="" ""r""2"":""
"" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" ""r""e""t"" ""+""="" ""g""r""i""d""[""r""2""]""[""c""2""]""
""
"" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" ""i""f"" ""r""1"" ""=""="" ""n"" ""-"" ""1"" ""a""n""d"" ""c""1"" ""=""="" ""n"" ""-"" ""1"":""
"" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" ""p""a""s""s"" "" ""#"" ""s""e""e""d"","" ""o""t""h""e""r""w""i""s""e"" ""-""i""n""f"" ""
"" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" ""e""l""s""e"":""
"" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" ""r""e""t"" ""+""="" ""m""a""x""(""
"" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" ""s""e""l""f"".""F""(""g""r""i""d"","" ""r""1""+""1"","" ""c""1"","" ""r""2""+""1"")"","" "" "" ""#"" ""d""o""w""n"","" ""d""o""w""n""
"" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" ""s""e""l""f"".""F""(""g""r""i""d"","" ""r""1""+""1"","" ""c""1"","" ""r""2"")"","" "" ""#"" ""d""o""w""n"","" ""r""i""g""h""t""
"" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" ""s""e""l""f"".""F""(""g""r""i""d"","" ""r""1"","" ""c""1""+""1"","" ""r""2""+""1"")"","" "" ""#"" ""r""i""g""h""t"","" ""d""o""w""n""
"" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" ""s""e""l""f"".""F""(""g""r""i""d"","" ""r""1"","" ""c""1""+""1"","" ""r""2"")"","" "" ""#"" ""r""i""g""h""t"","" ""r""i""g""h""t""
"" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "" "")""
""
"" "" "" "" "" "" "" "" "" "" "" "" ""s""e""l""f"".""c""a""c""h""e""[""r""1"","" ""c""1"","" ""r""2""]"" ""="" ""r""e""t""
""
"" "" "" "" "" "" "" "" ""r""e""t""u""r""n"" ""s""e""l""f"".""c""a""c""h""e""[""r""1"","" ""c""1"","" ""r""2""]""
""
""
""i""f"" ""_""_""n""a""m""e""_""_"" ""=""="" 